<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="../bridgeit-io-import/bridgeit-io-import.html">
<link rel="import" href="../../iron-flex-layout/classes/iron-flex-layout.html">
<link rel="import" href="../../paper-button/paper-button.html">
<link rel="import" href="../../paper-input/paper-input.html">
<link rel="import" href="../../paper-item/paper-item.html">
<link rel="import" href="../../paper-item/paper-item-body.html">
<link rel="import" href="../../paper-listbox/paper-listbox.html">
<link rel="import" href="../../paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../bridgeit-code-editor/bridgeit-code-editor.html">

<!--
Displays a transport editor that can build message templates for various technologies

@demo demo.html
-->
<dom-module id="bridgeit-transport-editor">
    <template>
        <style type="text/css">
           .miniCheck {
               font-size: 10px;
               font-weight: normal;
               margin-top: 20px;
           }
           .checkboxRow label {
               display: inline-block;
           }
           .indentTd {
               padding-left: 15px;
           }
           .code-editor {
               width: 100%;
               min-height: 200px;
           }
           paper-dropdown-menu {
               width: 100%;
           }
           paper-input, paper-dropdown-menu {
               --paper-input-container: {
                   padding: 0;
               }
           }
        </style>
        
        <div>
            <table cellpadding="5" cellspacing="0" width="90%">
            <tr>
                <td colspan="2" class="checkboxRow">
                    Enable Transport:
                    
                    <template is="dom-if" if="[[allowBrowser]]">
                        <label>
                            <input type="checkbox" checked="{{tool.transport.browser::change}}"/>
                            Browser
                        </label>
                    </template>
                    <template is="dom-if" if="[[allowCloud]]">
                        <label>
                            <input type="checkbox" checked="{{tool.transport.cloud::change}}"/>
                            Cloud
                        </label>
                    </template>
                    <template is="dom-if" if="[[allowSMS]]">
                        <label>
                            <input type="checkbox" checked="{{tool.transport.sms::change}}"/>
                            SMS
                        </label>
                    </template>
                    <template is="dom-if" if="[[allowEmail]]">
                        <label>
                            <input type="checkbox" checked="{{tool.transport.email::change}}"/>
                            Email
                        </label>
                    </template>
                    <template is="dom-if" if="{{noTransports}}">
                        No transports were enabled for this component
                    </template>
                </td>
            </tr>
            
            <template is="dom-if" if="{{!noTransports}}">
            <tr>
                <td colspan="2">&nbsp;</td>
            </tr>
            
            <tr>
                <th style="width: 70%;">Field</th>
                <th style="width: 30%;">Use For</th>
            </tr>
            <tr>
                <td><paper-input label="Subject" value="{{tool.subject.global::input}}"/></td>
                <td class="miniCheck layout horizontal">
                    <template is="dom-if" if="{{tool.transport.browser}}">
                    <label><input type="checkbox" checked="{{tool.subject.usebrowser::change}}"/>Browser</label>
                    </template><template is="dom-if" if="{{tool.transport.cloud}}">
                    <label><input type="checkbox" checked="{{tool.subject.usecloud::change}}"/>Cloud</label>
                    </template><template is="dom-if" if="{{tool.transport.sms}}">
                    <label><input type="checkbox" checked="{{tool.subject.usesms::change}}"/>SMS</label>
                    </template><template is="dom-if" if="{{tool.transport.email}}">
                    <label><input type="checkbox" checked="{{tool.subject.useemail::change}}"/>Email</label>
                    </template>
                </td>
            </tr>
            <template is="dom-if" if="{{!tool.subject.usebrowser}}">
                <tr>
                    <td class="indentTd"><paper-input label="Browser Subject" value="{{tool.subject.browser::input}}"/></td>
                    <td><label class="miniCheck"><input type="checkbox" checked disabled/>Browser</label></td>
                </tr>
            </template>
            <template is="dom-if" if="{{!tool.subject.usecloud}}">
                <tr>
                    <td class="indentTd"><paper-input label="Cloud Subject" value="{{tool.subject.cloud::input}}"/></td>
                    <td><label class="miniCheck"><input type="checkbox" checked disabled/>Cloud</label></td>
                </tr>
            </template>
            <template is="dom-if" if="{{!tool.subject.usesms}}">
                <tr>
                    <td class="indentTd"><paper-input label="SMS Subject" value="{{tool.subject.sms::input}}"/></td>
                    <td><label class="miniCheck"><input type="checkbox" checked disabled/>SMS</label></td>
                </tr>
            </template>
            <template is="dom-if" if="{{!tool.subject.useemail}}">
                <tr>
                    <td class="indentTd"><paper-input label="Email Subject" value="{{tool.subject.email::input}}"/></td>
                    <td><label class="miniCheck"><input type="checkbox" checked disabled/>Email</label></td>
                </tr>
            </template>
            
            <tr>
                <td><paper-input label="Details" value="{{tool.details.global::input}}"/></td>
                <td class="miniCheck layout horizontal">
                    <template is="dom-if" if="{{tool.transport.browser}}">
                    <label><input type="checkbox" checked="{{tool.details.usebrowser::change}}"/>Browser</label>
                    </template><template is="dom-if" if="{{tool.transport.cloud}}">
                    <label><input type="checkbox" checked="{{tool.details.usecloud::change}}"/>Cloud</label>
                    </template><template is="dom-if" if="{{tool.transport.sms}}">
                    <label><input type="checkbox" checked="{{tool.details.usesms::change}}"/>SMS</label>
                    </template><template is="dom-if" if="{{tool.transport.email}}">
                    <label><input type="checkbox" checked="{{tool.details.useemail::change}}"/>Email</label>
                    </template>
                </td>
            </tr>
            <template is="dom-if" if="{{!tool.details.usebrowser}}">
                <tr>
                    <td class="indentTd"><paper-input label="Browser Details" value="{{tool.details.browser::input}}"/></td>
                    <td><label class="miniCheck"><input type="checkbox" checked disabled/>Browser</label></td>
                </tr>
            </template>
            <template is="dom-if" if="{{!tool.details.usecloud}}">
                <tr>
                    <td class="indentTd"><paper-input label="Cloud Details" value="{{tool.details.cloud::input}}"/></td>
                    <td><label class="miniCheck"><input type="checkbox" checked disabled/>Cloud</label></td>
                </tr>
            </template>
            <template is="dom-if" if="{{!tool.details.usesms}}">
                <tr>
                    <td class="indentTd"><paper-input label="SMS Details" value="{{tool.details.sms::input}}"/></td>
                    <td><label class="miniCheck"><input type="checkbox" checked disabled/>SMS</label></td>
                </tr>
            </template>
            <template is="dom-if" if="{{!tool.details.useemail}}">
                <tr>
                    <td class="indentTd"><paper-input label="Email Details" value="{{tool.details.email::input}}"/></td>
                    <td><label class="miniCheck"><input type="checkbox" checked disabled/>Email</label></td>
                </tr>
            </template>
            
            <tr>
                <td><paper-input label="URL" value="{{tool.url.global::input}}"/></td>
                <td class="miniCheck layout horizontal">
                    <template is="dom-if" if="{{tool.transport.browser}}">
                    <label><input type="checkbox" checked="{{tool.url.usebrowser::change}}"/>Browser</label>
                    </template><template is="dom-if" if="{{tool.transport.cloud}}">
                    <label><input type="checkbox" checked="{{tool.url.usecloud::change}}"/>Cloud</label>
                    </template><template is="dom-if" if="{{tool.transport.sms}}">
                    <label><input type="checkbox" checked="{{tool.url.usesms::change}}"/>SMS</label>
                    </template><template is="dom-if" if="{{tool.transport.email}}">
                    <label><input type="checkbox" checked="{{tool.url.useemail::change}}"/>Email</label>
                    </template>
                </td>
            </tr>
            <template is="dom-if" if="{{!tool.url.usebrowser}}">
                <tr>
                    <td class="indentTd"><paper-input label="Browser URL" value="{{tool.url.browser::input}}"/></td>
                    <td><label class="miniCheck"><input type="checkbox" checked disabled/>Browser</label></td>
                </tr>
            </template>
            <template is="dom-if" if="{{!tool.url.usecloud}}">
                <tr>
                    <td class="indentTd"><paper-input label="Cloud URL" value="{{tool.url.cloud::input}}"/></td>
                    <td><label class="miniCheck"><input type="checkbox" checked disabled/>Cloud</label></td>
                </tr>
            </template>
            <template is="dom-if" if="{{!tool.url.usesms}}">
                <tr>
                    <td class="indentTd"><paper-input label="SMS URL" value="{{tool.url.sms::input}}"/></td>
                    <td><label class="miniCheck"><input type="checkbox" checked disabled/>SMS</label></td>
                </tr>
            </template>
            <template is="dom-if" if="{{!tool.url.useemail}}">
                <tr>
                    <td class="indentTd"><paper-input label="Email URL" value="{{tool.url.email::input}}"/></td>
                    <td><label class="miniCheck"><input type="checkbox" checked disabled/>Email</label></td>
                </tr>
            </template>
            
            <tr>
                <td>
                <paper-dropdown-menu label="Priority">
                    <paper-listbox class="dropdown-content" selected="{{tool.priority.global}}" attr-for-selected="name">
                        <paper-item name="default">default</paper-item>
                        <paper-item name="info">info</paper-item>
                        <paper-item name="warn">warn</paper-item>
                        <paper-item name="alert">alert</paper-item>
                        <paper-item name="critical">critical</paper-item>
                    </paper-listbox>
                </paper-dropdown-menu>
                </td>
                <td class="miniCheck layout horizontal">
                    <template is="dom-if" if="{{tool.transport.browser}}">
                    <label><input type="checkbox" checked="{{tool.priority.usebrowser::change}}"/>Browser</label>
                    </template><template is="dom-if" if="{{tool.transport.cloud}}">
                    <label><input type="checkbox" checked="{{tool.priority.usecloud::change}}"/>Cloud</label>
                    </template><template is="dom-if" if="{{tool.transport.sms}}">
                    <label><input type="checkbox" checked="{{tool.priority.usesms::change}}"/>SMS</label>
                    </template><template is="dom-if" if="{{tool.transport.email}}">
                    <label><input type="checkbox" checked="{{tool.priority.useemail::change}}"/>Email</label>
                    </template>
                </td>
            </tr>
            <template is="dom-if" if="{{!tool.priority.usebrowser}}">
                <tr>
                    <td class="indentTd">
                        <paper-dropdown-menu label="Browser Priority">
                            <paper-listbox class="dropdown-content" selected="{{tool.priority.browser}}" attr-for-selected="name">
                                <paper-item name="default">default</paper-item>
                                <paper-item name="info">info</paper-item>
                                <paper-item name="warn">warn</paper-item>
                                <paper-item name="alert">alert</paper-item>
                                <paper-item name="critical">critical</paper-item>
                            </paper-listbox>
                        </paper-dropdown-menu>
                    </td>
                    <td><label class="miniCheck"><input type="checkbox" checked disabled/>Browser</label></td>
                </tr>
            </template>
            <template is="dom-if" if="{{!tool.priority.usecloud}}">
                <tr>
                    <td class="indentTd">
                        <paper-dropdown-menu label="Cloud Priority">
                            <paper-listbox class="dropdown-content" selected="{{tool.priority.cloud}}" attr-for-selected="name">
                                <paper-item name="default">default</paper-item>
                                <paper-item name="info">info</paper-item>
                                <paper-item name="warn">warn</paper-item>
                                <paper-item name="alert">alert</paper-item>
                                <paper-item name="critical">critical</paper-item>
                            </paper-listbox>
                        </paper-dropdown-menu>
                    </td>
                    <td><label class="miniCheck"><input type="checkbox" checked disabled/>Cloud</label></td>
                </tr>
            </template>
            <template is="dom-if" if="{{!tool.priority.usesms}}">
                <tr>
                    <td class="indentTd">
                        <paper-dropdown-menu label="SMS Priority">
                            <paper-listbox class="dropdown-content" selected="{{tool.priority.sms}}" attr-for-selected="name">
                                <paper-item name="default">default</paper-item>
                                <paper-item name="info">info</paper-item>
                                <paper-item name="warn">warn</paper-item>
                                <paper-item name="alert">alert</paper-item>
                                <paper-item name="critical">critical</paper-item>
                            </paper-listbox>
                        </paper-dropdown-menu>
                    </td>
                    <td><label class="miniCheck"><input type="checkbox" checked disabled/>SMS</label></td>
                </tr>
            </template>
            <template is="dom-if" if="{{!tool.priority.useemail}}">
                <tr>
                    <td class="indentTd">
                        <paper-dropdown-menu label="Email Priority">
                            <paper-listbox class="dropdown-content" selected="{{tool.priority.email}}" attr-for-selected="name">
                                <paper-item name="default">default</paper-item>
                                <paper-item name="info">info</paper-item>
                                <paper-item name="warn">warn</paper-item>
                                <paper-item name="alert">alert</paper-item>
                                <paper-item name="critical">critical</paper-item>
                            </paper-listbox>
                        </paper-dropdown-menu>
                    </td>
                    <td><label class="miniCheck"><input type="checkbox" checked disabled/>Email</label></td>
                </tr>
            </template>
            
            <tr>
                <td>
                    <paper-dropdown-menu label="Expiry Time">
                        <paper-listbox class="dropdown-content" selected="{{tool.expiryTime.global}}" attr-for-selected="time">
                            <paper-item time="30">30 minutes</paper-item>
                            <paper-item time="60">1 hour</paper-item>
                            <paper-item time="120">2 hours</paper-item>
                            <paper-item time="480">8 hours</paper-item>
                            <paper-item time="1440">1 day</paper-item>
                            <paper-item time="4320">3 days</paper-item>
                            <paper-item time="10080">1 week</paper-item>
                            <paper-item time="43200">1 month</paper-item>
                        </paper-listbox>
                    </paper-dropdown-menu>
                </td>
                <td><label class="miniCheck"><input type="checkbox" checked disabled/>All</label></td>
            </tr>
            
            <tr>
                <td colspan="2">
                    Payload:
                    <bridgeit-code-editor class="code-editor" value="{{tool.payload}}"></bridgeit-code-editor>
                </td>
            </tr>
            
            </template>
            </table>
            
            <template is="dom-if" if="[[debug]]">
                <hr/>
                <h2>
                    Notification JSON
                    <button on-click="debugSubmit" title="Show the underlying notification JSON data">Refresh</button>
                </h2>
                <pre>[[debugJSON]]</pre>
            </template>
        </div>
    </template>
</dom-module>

<script src="bridgeit-transport-editor.js"></script>