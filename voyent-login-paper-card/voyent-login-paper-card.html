<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="../common/imports/voyent.html">
<link rel="import" href="../common/voyent-common-properties-behavior.html">
<link rel="import" href="../../iron-form/iron-form.html">
<link rel="import" href="../../iron-form-element-behavior/iron-form-element-behavior.html">
<link rel="import" href="../../iron-validatable-behavior/iron-validatable-behavior.html">
<link rel="import" href="../../iron-collapse/iron-collapse.html">
<link rel="import" href="../../paper-card/paper-card.html">
<link rel="import" href="../../paper-input/paper-input.html">
<link rel="import" href="../../paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../paper-button/paper-button.html">
<link rel="import" href="../../paper-spinner/paper-spinner.html">

<dom-module id="voyent-login-paper-card">
  <template>
    <style>
      :host {
        display: block;
      }
      paper-card{
        width: 100%;
      }
      paper-card::shadow .header.paper-card{
        background-color: #027244;
	@apply(--voyent-shadow);
      }
      paper-card::shadow .header.paper-card .title-text.paper-card{
        color: #FFF;
        @apply(--voyent-header-text);
      }
      paper-button[type='submit'] {
        padding:0;
        background-color: #028E54;
        border: 1px solid #C1C1C1;
        @apply(--voyent-login-button);
      }
      paper-button[type='submit']:hover {
        background-color: #01A762;
        @apply(--voyent-login-button-hover);
      }
      paper-button[type='submit']::shadow .button-content {
        padding:0;
      }
      paper-button[type='submit'] button {
        padding: 0.5em 0.8em;
        font: inherit;
        background-color: transparent;
        border-color: transparent;
        color: #FFF;
        outline: none;
      }
      paper-button[type='submit'] button::-moz-focus-inner {
        border: 0;
      }
      paper-icon-button{
        height: 35px;
        width: 35px;
      }
      .error{
        float: left;
        color: red;
        padding: 5px;
        line-height: 28px;
      }
      paper-spinner{
        vertical-align: middle;
      }
      :host ::content .title-text.over-image.paper-card{
        text-shadow: 3px 1px 4px #000;
      }
      :host ::content .header.paper-card{
        /*max-height: 200px;*/
        border-bottom: 10px solid #027244;
        @apply(--voyent-login-header);
      }

      /**@media (max-height: 600px) {
        :host ::content .header.paper-card{
          max-height: 80px;
        }
      }*/

      paper-card{
        --paper-card-header-image:{
          @apply(--voyent-login-image);
        };
      }

    </style>
    <form is="iron-form" id="loginForm" on-submit="handleLogin">
      <paper-card heading="{{heading}}" image="{{headerImage}}">
        <div class="card-content">
          <paper-input id="username" label="Username" required maxlength="35" placeholder="Enter your username" value="{{username}}">
            <paper-icon-button suffix icon="clear" on-click="_clearUsername" tabindex="-1"></paper-icon-button>
          </paper-input>
          <paper-input type="password" required label="Password" placeholder="Enter your password" value="{{password}}">
            <paper-icon-button suffix icon="clear" on-click="_clearPassword" tabindex="-1"></paper-icon-button>
          </paper-input>
          <template is="dom-if" if="[[hideallowed]]">
              <div style="text-align: right;">
                  <button type="button" onclick="toggle('#collapse')" title="Toggle the details panel">...</button>
              </div>
          </template>
          <iron-collapse id="collapse" opened="[[!hideclosed]]" no-animation="true">
              <div id="content">
                  <template is="dom-if" if="[[showrealminput]]">
                    <paper-input required label="{{realminputlabel}}" placeholder="Enter the {{realminputlabel}}" value="{{realm}}">
                      <paper-icon-button suffix icon="clear" on-click="_clearRealm" tabindex="-1"></paper-icon-button>
                    </paper-input>
                  </template>
                  <template is="dom-if" if="[[showaccountinput]]">
                    <paper-input required label="{{accountinputlabel}}" placeholder="Enter the {{accountinputlabel}}" value="{{account}}">
                      <paper-icon-button suffix icon="clear" on-click="_clearAccount" tabindex="-1"></paper-icon-button>
                    </paper-input>
                  </template>
                  <template is="dom-if" if="[[showhostinput]]">
                    <paper-input required label="Host" placeholder="Enter the host" value="{{host}}">
                        <paper-icon-button suffix icon="clear" on-click="_clearHost" tabindex="-1"></paper-icon-button>
                    </paper-input>
                  </template>
              </div>
          </iron-collapse>
          <content>
          </content>
        </div>
        <div class="card-actions" style="text-align: right">
          <paper-spinner id="loginSpinner" class="orange"></paper-spinner>
          <div class="error"><span>{{error}}</span></div>
          <paper-button raised colored on-click="cancel"><span>{{cancelLabel}}</span></paper-button>
          <paper-button type="submit" raised colored on-click="handleLogin"><button><span>{{submitLabel}}</span></button></paper-button>
        </div>
      </paper-card>
    </form>
    </div>
  </template>
  
  <script>
      function toggle(selector) {
          document.querySelector(selector).toggle();
      }
  </script>
</dom-module>
<script src="voyent-login-paper-card.js"></script>
