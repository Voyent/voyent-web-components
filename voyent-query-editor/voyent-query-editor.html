<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="../common/imports/voyent.html">
<link rel="import" href="voyent-query-editor-styles.html">
<link rel="import" href="query-builder-styles.html">
<link rel="import" href="font-awesome-styles.html">
<link rel="import" href="../../paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../../iron-selector/iron-selector.html">

<!--
Displays a query editor based on jQuery-QueryBuilder that can build queries for data stored by the Voyent Services.
You can access the Query Editor programmatically using the editor property (< voyent-query-editor >.editor).
<a target="_blank" href="http://mistic100.github.io/jQuery-QueryBuilder/">More Info</a>

Example:

		<voyent-query-editor realm="myRealm"
                           account="myAccount">
		</voyent-query-editor>

@demo demo.html
-->
<dom-module id="voyent-query-editor">
    <template>
        <style is="custom-style" include="query-builder-styles"></style>
        <style is="custom-style" include="voyent-query-editor-styles"></style>
        <style is="custom-style" include="font-awesome-styles"></style>
        <style>
            .selectMenus { width:385px; height:60px; margin:0 auto; }
            iron-selector > * { padding: 8px;}
            .floatLeft { float:left; }
            .large { width:385px; }
            .small { width:190px; }
            .collection { padding-left:5px; }
        </style>

        <template is="dom-if" if="{{showselectmenus}}">
            <div class="selectMenus">
                <paper-dropdown-menu class$="{{_getClass(service)}}" label="Service:">
                    <iron-selector class="dropdown-content" attr-for-selected="name" selected={{service}}>
                        <template is="dom-repeat" items="{{_getServices()}}">
                            <div name="{{item}}">{{_capitalize(item)}}</div>
                        </template>
                    </iron-selector>
                </paper-dropdown-menu>
                <template is="dom-if" if="{{_collections}}">
                    <paper-dropdown-menu class="collection small floatLeft" label="Collection:">
                        <iron-selector class="dropdown-content" attr-for-selected="name" selected="{{collection}}">
                            <template is="dom-repeat" items="{{_collections}}">
                                <div name="{{item}}">{{_capitalize(item)}}</div>
                            </template>
                        </iron-selector>
                    </paper-dropdown-menu>
                </template>
                <div style="clear:left;"></div>
            </div>
        </template>
        <div id="queryBuilder"></div>
    </template>
</dom-module>

<script src="./voyent-query-editor.js"></script>