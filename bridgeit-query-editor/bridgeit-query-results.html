<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="../bridgeit-io-import/bridgeit-io-import.html">

<!--
Displays the results of queries executed by the `bridgeit-query-editor` component by listening for the `queryExecuted` event.

Example:

    <bridgeit-query-results for="editor"></bridgeit-query-results>

@demo demo.html
-->
<dom-module id="bridgeit-query-results">
    <template>
        <style type="text/css">
            table {
                margin:0 auto;
                border: 1px solid #ddd;
                border-spacing: 0;
                border-collapse: collapse;
                @apply(--query-results-table);
            }
            thead {
                border: 1px solid #ddd;
                @apply(--query-results-thead);
            }
            tbody {
                @apply(--query-results-tbody);
            }
            th {
                border: 1px solid #ddd;
                @apply(--query-results-th);
            }
            tr {
                @apply(--query-results-tr);
            }
            td {
                border: 1px solid #ddd;
                max-width: 100px;
                word-wrap: break-word;
                @apply(--query-results-td);
            }
        </style>
        <table>
            <thead>
                <tr>
                    <template is="dom-repeat" items="{{_tableHeaders}}">
                        <th class="text-center">{{item}}</th>
                    </template>
                </tr>
            </thead>
            <tbody>
                <template is="dom-repeat" as="row" items="{{_tableRows}}">
                    <tr>
                        <template is="dom-repeat" as="column" items="{{row}}">
                            <td class="text-center"><html-binder html="{{column}}"></html-binder></td>
                        </template>
                    </tr>
                </template>
            </tbody>
        </table>
    </template>
</dom-module>

<script src="./bridgeit-query-results.js"></script>

<dom-module id="html-binder">
    <template>
        <span id="content"></span>
    </template>
    <script>
        Polymer({
            is: "html-binder",
            properties: {
                html: { type: String, observer:'_htmlChanged' }
            },
            ready: function(){
                this.$.content.innerHTML = this.html;
            },
            _htmlChanged: function(newVal) {
                this.$.content.innerHTML = newVal;
            }
        });
    </script>
</dom-module>
