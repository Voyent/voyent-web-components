<!--
	@license
	Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
	This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
	The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
	The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
	Code distributed by Google as part of the polymer project is also
	subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<!doctype html>
<html>
<head>
	<meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
	<title>BridgeIt Web Components Demo</title>

	<!-- Load the bridgeit.js and brideit.io.js scripts and ensure that your page has ES6 Promise support -->
	<script src="//cdn.lukej.me/es6-promise/1.0.0/promise.min.js"></script>
	<script>
		if( !("Promise" in window)){
			window.Promise = ES6Promise.Promise;
		}
	</script>
	<script src="../../bridgeit.js/src/bridgeit.js"></script>
	<script src="../../bridgeit.io.js/lib/bridgeit.io.js"></script>

	<!-- Load the webcomponents polyfill -->
	<script src="../../webcomponentsjs/webcomponents-lite.min.js"></script>
  <link rel="import" href="../../polymer/polymer.html">

	<!-- Load bridgeit action editor component -->
	<link rel="import" href="bridgeit-auth-provider.html">

  <!-- Load Polymer dependencies for demo -->
  <link rel="import" href="../../iron-form-element-behavior/iron-form-element-behavior.html">
  <link rel="import" href="../../iron-form/iron-form.html">
  <link rel="import" href="../../paper-card/paper-card.html">
  <link rel="import" href="../../paper-input/paper-input.html">
  <link rel="import" href="../../paper-button/paper-button.html">
  <link rel="import" href="../../paper-icon-button/paper-icon-button.html">
    
	<!-- Demo specific CSS -->
	<link rel="stylesheet" href="../common/demo.css"/>

	<!-- Define custom styling for the component (optional) -->
	<style is="custom-style">
       
	</style>

</head>
<body unresolved>
   <style include="shared-styles">
    :host {
      display: block;
    }
    .login-view-container{
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      padding-top: 40px;
    }
    paper-card{
      width: 100%;
    }
    paper-card::shadow .header.paper-card{
      background-color: #027244;
    }
    paper-card::shadow .header.paper-card .title-text.paper-card{
      color: #FFF;
    }
    paper-icon-button{
      height: 35px;
      width: 35px;
    }
    paper-input{
      --paper-input-container-focus-color: #000067;
    }
    .settings{
      width: 100%;
      border: 1px solid #;
      text-align: left;
      margin-bottom: 20px;
    }
    .settings label{
      display: inline-block;
      width: 160px;
      text-align: left;
    }
   
  </style>
  <template id="demo" is="dom-bind">
    <h1>BridgeIt Auth Component Demo</h1>
    <h3>Login with your BridgeIt Account Information</h3>
    <hr/> 
    <form is="iron-form" id="loginForm">
      <bridgeit-auth-provider id="bridgeitAuth" account="{{account}}" realm="{{realm}}" 
        username="{{username}}" password="{{password}}" time-remaining="{{msRemaining}}"
        logged-in="{{isLoggedIn}}" error="{{loginError}}" access-token="{{hostAccessToken}}">
      </bridgeit-auth-provider>
      <paper-card class="settings">
        <span>
          <label>Logged In:</label>
          <span>{{isLoggedIn}}</span>
        </span>
        <span>
          <label>Access Token:</label>
          <span>{{hostAccessToken}}</span>
        </span>
         <span>
          <label>Time Remaining:</label>
          <span>{{msRemaining}}</span>
        </span>
      </paper-card>
      <paper-card>
        <div class="card-content">
        	<paper-input label="Account" required placeholder="Enter your account name" value="{{account}}">
             <paper-icon-button suffix icon="clear" on-click="_clearUsername" tabindex="-1"></paper-icon-button>
          </paper-input>
          <paper-input label="Realm" required placeholder="Enter your realm name" value="{{realm}}">
             <paper-icon-button suffix icon="clear" on-click="_clearUsername" tabindex="-1"></paper-icon-button>
          </paper-input>
          <paper-input label="Username" required placeholder="Enter your username" value="{{username}}">
             <paper-icon-button suffix icon="clear" on-click="_clearUsername" tabindex="-1"></paper-icon-button>
          </paper-input>
          <paper-input type="password" required label="Password" placeholder="Enter your password" value="{{password}}">
            <paper-icon-button suffix icon="clear" on-click="_clearPassword" tabindex="-1"></paper-icon-button>
          </paper-input>
        </div>
        <div class="card-actions" style="text-align: right">
          <div style="float:left; color: red"><span>{{error}}</span></div>
          <paper-button onclick="handleLogout(event)" raised colored>Logout</paper-button>
          <paper-button onclick="handleLogin(event)" raised colored>Login</paper-button>
        </div>
      </paper-card>
    </form>
    <script>
        function handleLogin(e){
          document.querySelector('#bridgeitAuth').login();
          e.preventDefault();
        }
        function handleLogout(e){
          document.querySelector('#bridgeitAuth').logout();
          e.preventDefault();
        }

        function _clearPassword(){
          this.password = '';
        }

        function _clearUsername(){
          this.username = '';
        }
    </script>
  </template>
</body>
</html>