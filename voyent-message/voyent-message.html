<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="../common/imports/voyent.html">

<!--
Displays error and info messages on the page, fired from events at a demo level
This is meant as a user friendly alternative to web console logging

To use this component add it to your page, in the location you want the messages to appear

<voyent-message id="voyent-message"
                  hideafter="4000"
                  usetimestamp="true"
                  useconsole="true">
</voyent-message>

Then when you need to show an error/info message you have a few approaches:

(From Polymer)
this.fire('message-error', 'Some error text');
this.fire('message-info', 'Some info text');

(From plain Javascript)
window.dispatchEvent(new CustomEvent("message-error", { 'detail': 'Some error text' }));
window.dispatchEvent(new CustomEvent("message-info", { 'detail': 'Some info text' }));

(From direct component access)
document.getElementById('voyent-message').error("Some error text");
document.getElementById('voyent-message').info("Some info text");

@demo demo.html
-->
<dom-module id="voyent-message">
    <template>
        <style type="text/css">
            .error {
                color: #CC0000;
                @apply(--message-error);
            }
            
            .info {
                color: #0000CC;
                @apply(--message-info);
            }
            
            .wrapper {
                @apply(--message-wrapper);
            }
        </style>
        
        <div class="wrapper">
            <template is="dom-repeat" strip-whitespace items="{{messages}}" as="message">
                <span class$="{{message.type}}">
                <template is="dom-if" if="[[usetimestamp]]">
                    [[message.timestamp]]>
                </template>
                [[message.text]]&nbsp;
                </span><br/>
            </template>
        </div>
    </template>
</dom-module>

<script src="./voyent-message.js"></script>