<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="../common/imports/voyent.html">
<link rel="import" href="../common/voyent-alert/voyent-alert-map-behaviour.html">
<link rel="import" href="../common/voyent-alert/voyent-alert-behaviour.html">
<link rel="import" href="../common/voyent-alert/voyent-alert-properties.html">
<link rel="import" href="../../paper-dialog/paper-dialog.html">

<!--
Displays a map-based tool for creating new Alert Templates.

Example:

    <voyent-alert-template-editor account="myAccount"
                                  realm="myRealm"
                                  height="500">
    </voyent-alert-template-editor>

@demo demo.html
-->
<dom-module id="voyent-alert-template-editor">
    <template>
        <style include="voyent-alert-styles" is="custom-style">
            .icon-div {
                width:16px;
                height:16px;
                overflow:hidden;
                position:relative;
                display:inline-block;
            }
            .icon {
                position:absolute;
                top:-176px;
            }
        </style>
        <div id="container">
            <div id="map"></div><div id="sidePanel">
                <div id="propertiesPanel">
                    <template is="dom-if" if="[[_isLoggedIn]]">
                        <voyent-alert-properties _loaded-alert-template-data="{{_loadedAlertTemplateData}}"
                                                 _map="{{_map}}"
                                                 _area-region="{{_areaRegion}}"></voyent-alert-properties>
                        <template is="dom-if" if="[[!_loadedAlertTemplateData.alertTemplate]]">
                            <div class="alert-template-title">New Alert Template</div>
                            <div class="alert-template-desc">
                                Activate one of the icons from the toolbar in the
                                top-right corner and click a location inside your region.
                            </div>
                        </template>
                    </template>
                    <template is="dom-if" if="[[!_isLoggedIn]]">
                        <div class="alert-template-title">Invalid Credentials</div>
                        <div class="alert-template-desc">Please login to active this panel.</div>
                    </template>
                </div>
                    <div id="crudPanel">
                        <template is="dom-if" if="[[!hideButtons]]">
                            <template is="dom-if" if="[[_loadedAlertTemplateData.alertTemplate]]">
                                <paper-button raised title="Cancel" on-click="cancel">Cancel</paper-button>
                                <paper-button raised title="Save" on-click="saveAlertTemplate">Save</paper-button>
                            </template>
                        </template>
                    </div>
            </div>
        </div>
        <div id="circleBttn" class="customMapBttnWrap" hidden>
            <div class="customMapBttn" title="Create a new alert template with circle zones">
                <span>
                    <div class="customMapBttnImg">
                        <img src="../common/voyent-alert/img/drawing.png">
                    </div>
                </span>
            </div>
        </div>
        <div id="polygonBttn" class="customMapBttnWrap" hidden>
            <div class="customMapBttn" title="Create a new alert template with polygonal zones">
                <span>
                    <div class="customMapBttnImg">
                        <img src="../common/voyent-alert/img/drawing.png">
                    </div>
                </span>
            </div>
        </div>
        </div>
        <paper-dialog id="modalDialog" modal on-keyup="_dialogKeyUp" on-iron-overlay-opened="_fixModalStacking">
            <div>
                <p>{{_dialogMessage}}</p>
                <template is="dom-if" if="[[_showDialogInput]]">
                    <paper-input autofocus no-label-float on-keyup="_dialogKeyUp" value="{{_dialogInput}}"></paper-input>
                </template>
                <div class="dialog-bttns">
                    <paper-button raised title="Cancel" on-click="_closeDialog">Cancel</paper-button>
                    <paper-button raised title="Confirm" on-click="_confirmDialog">Confirm</paper-button>
                </div>
            </div>
        </paper-dialog>
    </template>
</dom-module>

<script src="voyent-alert-template-editor.js"></script>
