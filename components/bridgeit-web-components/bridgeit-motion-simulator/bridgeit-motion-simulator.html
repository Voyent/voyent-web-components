<link rel="import" href="../../polymer/polymer.html">

<!--
Show a map of BridgeIt location data and simulate location changes by dragging user's around the map or define an `origin` and `destination` and simulate motion along the path!

Example:

    <bridgeit-motion-simulator accesstoken="xxx"
                               account="myAccount"
                               realm="myRealm"
                               inputs
                               buttons>
    </bridgeit-motion-simulator>

@demo demo.html
-->
<dom-module id="bridgeit-motion-simulator">
    <style type="text/css">
        #map {
            width:100%;
            height:200px;
            margin-bottom:15px;
            @apply(--motion-simulator-map);
        }
        .form-group {
            margin-bottom:15px;
            @apply(--motion-simulator-input-group);
        }
        .form-control {
            width:100%;
            @apply(--motion-simulator-input);
        }
        .simulatorWrapper label {
            @apply(--motion-simulator-label);
        }
        .buttonContainer {
            text-align:center;
            @apply(--motion-simulator-button-container);
        }
        .buttonContainer button {
            @apply(--motion-simulator-button);
        }
        .simulatorWrapper {
            @apply(--motion-simulator-wrapper);
        }
        .simControl {
            background-color: #FFF;
            border-bottom-right-radius: 2px;
            border-top-right-radius: 2px;
            border-top: 1px solid rgba(0, 0, 0, 0.14902);
            border-right: 1px solid rgba(0, 0, 0, 0.14902);
            border-bottom: 1px solid rgba(0, 0, 0, 0.14902);
            border-left-width: 0px;
            box-shadow: rgba(0,0,0,0.298039) 0px 1px 4px -1px;
            padding-left: 4px;
        }
        .simControl label {
            color: rgb(86, 86, 86);
            font-family: Roboto, Arial, sans-serif;
            font-size: 11px;
            font-weight: 700;
            cursor:pointer;
        }
    </style>
    <template>
        <div id="container">
            <div id="map"></div>
        </div>
        <div class="simulatorWrapper">
            <template is="dom-if" if="{{inputs}}">
                <template is="dom-if" if="{{_eta}}">
                    <div class="form-group">
                        <label for="eta">ETA:</label>
                        <div id="eta">{{_eta}}</div>
                    </div>
                </template>
                <div class="form-group">
                    <label for="origin">Origin:</label>
                    <input id="origin" type="text" class="form-control" value="{{origin::change}}">
                </div>
                <div class="form-group">
                    <label for="destination">Destination:</label>
                    <input id="destination" type="text" class="form-control" value="{{destination::change}}">
                </div>
                <div class="form-group">
                    <label for="travelMode">Travel Mode:</label>
                    <select id="travelMode" class="form-control" value="{{travelmode::change}}">
                        <option value="DRIVING">Driving</option>
                        <option value="BICYCLING">Bicycling</option>
                        <option value="WALKING">Walking</option>
                        <option value="TRANSIT">Transit</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="speed">Speed (km/h):</label>
                    <input id="speed" type="number" min="1" class="form-control" value="{{speed::change}}">
                </div>
                <div class="form-group">
                    <label for="frequency">Location Update Frequency (seconds):</label>
                    <input id="frequency" type="number" min="1" class="form-control" value="{{frequency::change}}">

                </div>
            </template>
            <template is="dom-if" if="{{buttons}}">
                <div class="buttonContainer">
                    <button on-click="updateLocationAtMarker">Manual Location Update</button>
                    <br/><br/>
                    <button on-click="previousCoordinate">Previous</button>
                    <button on-click="cancelSimulation">Stop</button>
                    <button on-click="playSimulation">Play</button>
                    <button on-click="pauseSimulation">Pause</button>
                    <button on-click="nextCoordinate">Next</button>
                </div>
            </template>
        </div>
        <div id="customControl" style="display:none;">
            <div class="simControl">
                <label id="followUser">Follow User <input id="center" type="checkbox"></label>
            </div>
        </div>
    </template>
</dom-module>

<script src="bridgeit-motion-simulator.js"></script>