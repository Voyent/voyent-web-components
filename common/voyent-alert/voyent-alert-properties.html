<link rel="import" href="../../../polymer/polymer.html">
<link rel="import" href="../imports/voyent.html">
<link rel="import" href="./voyent-alert-behaviour.html">
<link rel="import" href="./voyent-alert-badge-chooser.html">
<link rel="import" href="../imports/jscolor.html">
<link rel="import" href="../../../paper-input/paper-input.html">
<link rel="import" href="../../../paper-slider/paper-slider.html">
<link rel="import" href="../../../iron-icon/iron-icon.html">
<link rel="import" href="../../../paper-toggle-button/paper-toggle-button.html">
<link rel="import" href="../../../iron-icons/iron-icons.html">
<link rel="import" href="../../../paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../../paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../../../iron-selector/iron-selector.html">
<link rel="import" href="../../../paper-item/paper-item.html">
<link rel="import" href="../../common/voyent-custom-validator.html">
<!--
Internal component used to display the properties panel inside Voyent alert components.

@demo demo.html
-->
<dom-module id="voyent-alert-properties">
    <template>
        <style include="voyent-alert-styles" is="custom-style">
            *,
            *:before,
            *:after {
                box-sizing: border-box;
            }
            .accordion {
                text-align: left;
            }
            .accordion .header {
                padding: 5px;
                position: relative;
                display: block;
                min-height: 20px;
                cursor: pointer;
                color: #777;
                text-shadow: 1px 1px 1px rgba(255,255,255,0.8);
                font-size: 16px;
                background: #ffffff;
                background: -moz-linear-gradient(top, #ffffff 1%, #eaeaea 100%);
                background: -webkit-gradient(linear, left top, left bottom, color-stop(1%,#ffffff), color-stop(100%,#eaeaea));
                background: -webkit-linear-gradient(top, #ffffff 1%,#eaeaea 100%);
                background: -o-linear-gradient(top, #ffffff 1%,#eaeaea 100%);
                background: -ms-linear-gradient(top, #ffffff 1%,#eaeaea 100%);
                background: linear-gradient(top, #ffffff 1%,#eaeaea 100%);
                filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#eaeaea',GradientType=0 );
                box-shadow:
                        0px 0px 0px 1px rgba(155,155,155,0.3),
                        1px 0px 0px 0px rgba(255,255,255,0.9) inset,
                        0px 2px 2px rgba(0,0,0,0.1);
            }
            .accordion .header.active,
            .accordion .header:hover {
                color: black;
                text-shadow: 0px 1px 1px rgba(255,255,255, 0.6);
                box-shadow:
                        0px 0px 0px 1px rgba(155,155,155,0.3),
                        0px 2px 2px rgba(0,0,0,0.1);
                word-wrap: break-word;
            }
            .accordion .header:hover {
                background: #fff;
            }
            .accordion .header.active {
                background: #c6e1ec;
            }
            .accordion .body {
                background: rgba(255, 255, 255, 0.5);
                margin-top: -1px;
                overflow: hidden;
                max-height: 0;
                position: relative;
                -webkit-transition: max-height 0.3s ease-in-out, box-shadow 0.6s linear;
                -moz-transition: max-height 0.3s ease-in-out, box-shadow 0.6s linear;
                -o-transition: max-height 0.3s ease-in-out, box-shadow 0.6s linear;
                -ms-transition: max-height 0.3s ease-in-out, box-shadow 0.6s linear;
                transition: max-height 0.3s ease-in-out, box-shadow 0.6s linear;
            }
            .accordion .body.active {
                max-height: 500px;
                -webkit-transition: max-height 0.5s ease-in-out, box-shadow 0.1s linear;
                -moz-transition: max-height 0.5s ease-in-out, box-shadow 0.1s linear;
                -o-transition: max-height 0.5s ease-in-out, box-shadow 0.1s linear;
                -ms-transition: max-height 0.5s ease-in-out, box-shadow 0.1s linear;
                transition: max-height 0.5s ease-in-out, box-shadow 0.1s linear;
                box-shadow: 0px 0px 0px 1px rgba(155,155,155,0.3);
            }
            .row {
                width: 100%;
                padding:0 10px 0 10px;
            }
            .propertyCol,
            .valueCol,
            .buttonCol,
            .inputCol,
            .dropdownCol {
                padding: 8px 0 8px 0;
                font-size: 13px;
                text-align: center;
                display:inline-block;
                vertical-align: middle;
            }
            .dropdownCol.movement,
            .inputCol.movement {
                padding: 0;
            }
            .propertyCol {
                width: 35%;
            }
            .valueCol {
                width: 62%;
            }
            .valueCol.opacity {
                padding:0;
            }
            .buttonCol {
                width:100%;
            }
            .buttonCol paper-button {
                font-size: 10px;
                background-color:white;
            }
            .inputCol {
                width: 50%;
            }
            .dropdownCol {
                width: 47%;
            }
            paper-slider {
                width: 100%;
                margin:0;
            }
            paper-input-container {
                padding:0;
            }
            paper-input.rename-input {
                margin: 0 5px 0 5px;
            }
            paper-icon-button {
                padding: 0;
                width: 20px;
                height: 20px;
                z-index: 30;
            }
            paper-icon-button[disabled] {
                color: #d3d1d1;
            }
            paper-input {
                --paper-input-container-input: {
                    font-size:13px;
                };
            }
            paper-dropdown-menu {
                --paper-input-container-input: {
                    font-size: 13px;
                };
            }
            paper-dropdown-menu {
                width:100%;
            }
            .jscolor {
                width:100%;
                text-align:center;
            }
            .alert-zones-label {
                text-align:center;
            }
            .gradient-header {
                background-color: #EEEEEE !important;
                color:white !important;
                background: -moz-linear-gradient(top, var(--app-primary-color,#2E348E) 0%, #EEEEEE 100%) !important;
                background: -webkit-linear-gradient(top, var(--app-primary-color,#2E348E) 0%, #EEEEEE 100%) !important;
                background: linear-gradient(to bottom, var(--app-primary-color,#2E348E) 0%, #EEEEEE 100%) !important;
                padding: 10px !important;
                border-radius: 5px 5px 0 0 !important;
                text-shadow: 0 0 5px var(--app-primary-color,#2E348E) !important;
                -webkit-touch-callout: none !important;
                -webkit-user-select: none !important;
                -khtml-user-select: none!important;
                -moz-user-select: none !important;
                -ms-user-select: none !important;
                user-select: none !important;
                font-size: 16px !important;
                margin: 0 !important;
            }
            .movement-input {
                --paper-input-container-input: {
                    font-size:15px;
                };
            }
            .movement-input.direction {
                --paper-input-container-input: {
                    font-size:13px;
                };
            }
            .float-right {
                float: right;
            }
            .title,
            .title-bttns {
                display:inline-block;
                cursor:pointer;
            }
            .title {
                width:100%;
                word-wrap:break-word;
            }
            .title.zone {
                width: calc(100% - 26px);
                font-size:14px;
            }
            .title.zone.active {
                width: calc(100% - 78px);
            }
            .title.zone.movement,
            .title.zone.movement.active {
                font-size:16px;
            }
            .title.zone.active.no-edit {
                width: calc(100% - 52px);
            }
            .title-bttns {
                width:45px;
            }
            .title-bttns.no-edit {
                width:22px !important;
            }
            .delete-button {
                text-align:center;
            }
            .no-stack {
                margin:20px 0 10px 0;
            }
            .bold {
                font-weight: bold;
            }
            .category-message {
                margin: 15px 0;
            }
            .new-category-wrapper {
                max-width: 535px;
                margin-bottom: 20px;
            }
            .new-category-input-wrapper {
                display: inline-block;
                width: 325px;
            }
            .new-category-button-wrapper {
                display:inline-block;
                margin-left: 32px;
            }
            .category-wrapper {
                max-width: 535px;
                max-height: 128px;
                overflow-y: auto;
                overflow-x: hidden;
                padding-top: 2px;
            }
            .category-item {
                max-width: 400px;
                border: 2px black solid;
                height: 40px;
                cursor: pointer;
                line-height: 40px;
                text-align: center;
                display: inline-block;
                margin: -2px 4px 0 0;
                text-overflow: ellipsis;
                overflow: hidden;
                white-space: nowrap;
                padding: 0 10px;
                font-weight:bold;
                border-radius:10px;
            }
            .category-item.iron-selected {
                border: 5px outset #2E348E;
                color: #2E348E;
                line-height: 34px;
                padding: 0 15px;
            }
            .category-buttons-wrapper {
                margin: 20px;
            }
            .category-picker paper-button {
                margin-top: 10px;
            }
            .table-wrap {
                max-width: 535px;
                margin-bottom: 20px;
            }
            .table-scroll {
                max-height: 200px;
                min-height: 200px;
                overflow-y: scroll;
            }
            .table-scroll > *:nth-child(even) {
                background-color: #EDEDED;
            }
            .tableHeader {
                background-color: #dddddd;
                font-weight: bold;
                text-align: center;
            }
            .table {
                width: 100%;
                display: table;
            }
            .category-col, .delete-col {
                display: table-cell;
                vertical-align: middle;
                overflow: auto;
                text-align: left;
                text-overflow: clip;
                word-break: keep-all;
            }
            .category-col {
                width: 90%;
                text-align: center;
                padding: 10px 10px 20px 10px;
            }
            .category-col paper-input {
                --paper-input-container-input: {
                    font-size:13px;
                };
            }
            .delete-col {
                width: 10%;
                text-align: center;
            }
        </style>

        <voyent-custom-validator id="newCategoryValidator" validator-name="newCategoryValidator"></voyent-custom-validator>
        <voyent-custom-validator id="existingCategoryValidator" validator-name="existingCategoryValidator"></voyent-custom-validator>

        <template is="dom-if" if="[[_loadedAlert]]">
            <template is="dom-if" if="[[!hideAlertName]]">
                <div>
                    <template is="dom-if" if="[[!_renamingTemplate]]">
                        <div class="alert-template-title">
                            <div class="title" on-click="_toggleAlertTemplateRenaming">
                                [[_loadedAlert.template.name]]
                            </div>
                        </div>
                    </template>
                    <template is="dom-if" if="[[_renamingTemplate]]">
                        <paper-input id="alertTemplate" tabindex="1"
                                     class="rename-input"
                                     label="Alert Template"
                                     placeholder="New Value"
                                     maxlength="70"
                                     on-keydown="_renameAlertTemplateViaKeydown"
                                     on-blur="_renameAlertTemplateViaBlur"
                                     value="{{_templateNameVal::input}}"
                                     disabled="[[!_renamingTemplate]]">
                        </paper-input>
                    </template>
                </div>
            </template>
            <template is="dom-if" if="[[showMovementAccordion]]">
                <template is="dom-if" if="[[_loadedAlert.template.zoneStacks.length]]">
                    <div class="accordion">
                        <div class$="{{_getAccordionClasses('header',_showMovement,'gradient-header')}}">
                            <paper-icon-button title="Toggle Movement Properties" icon="{{_getArrowIcon(_showMovement)}}"
                                               on-click="_toggleMovement" data-index$="[[index]]"></paper-icon-button>
                            <div class$="{{_getZoneTitleClasses(_showMovement,'','movement')}}"
                                 data-index$="[[index]]" on-click="_toggleMovement">
                               Alert Movement
                            </div>
                        </div>
                        <div class$="{{_getAccordionClasses('body',_showMovement,'')}}">
                            <div class="table">
                                <div class="row">
                                    <div class="inputCol movement">
                                        <paper-input value="{{_alertDirection::input}}"
                                                     class="movement-input"
                                                     tabindex="2"
                                                     placeholder="Degrees"
                                                     type="number" no-label-float
                                                     step="0.05" min="0" max="360" maxlength="3">
                                        </paper-input>
                                    </div>
                                    <div class="dropdownCol movement">
                                        <paper-dropdown-menu tabindex="3"
                                                             class="movement-input direction"
                                                             placeholder="Direction"
                                                             no-label-float>
                                            <iron-selector id="alertCardinalDirection" class="dropdown-content"
                                                           on-iron-activate="_alertCardinalDirectionChanged"
                                                           selected="{{_alertCardinalDirection}}"
                                                           attr-for-selected="name">
                                                <template is="dom-repeat" items="[[_alertCardinalDirections]]">
                                                    <paper-item name="[[item.value]]">[[item.label]]</paper-item>
                                                </template>
                                            </iron-selector>
                                        </paper-dropdown-menu>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="inputCol movement">
                                        <paper-input value="{{_alertSpeed::input}}"
                                                     class="movement-input"
                                                     tabindex="3"
                                                     placeholder="Speed"
                                                     type="number" no-label-float
                                                     step="0.5" min="0" maxlength="5">
                                        </paper-input>
                                    </div>
                                    <div class="dropdownCol movement">
                                        <paper-dropdown-menu tabindex="4"
                                                             class="movement-input"
                                                             placeholder="Unit"
                                                             no-label-float>
                                            <iron-selector id="alertSpeedUnit" class="dropdown-content"
                                                           selected="{{_alertSpeedUnit}}"
                                                           attr-for-selected="name">
                                                <paper-item name="kph">KPH</paper-item>
                                                <paper-item name="mph">MPH</paper-item>
                                            </iron-selector>
                                        </paper-dropdown-menu>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </template>
            </template>
            <template is="dom-if" if="[[_loadedAlert.selectedStack]]">
                <div>
                    <div class="alert-zones-label gradient-header">
                        Proximity Zones
                        <paper-icon-button title="Add Zone to Stack" class="float-right"
                                           icon="add" on-click="_addProximityZone">
                        </paper-icon-button>
                    </div>
                </div>
            </template>
            <template is="dom-if" if="[[!hideBadgeChooser]]">
                <div class="accordion">
                    <div class$="{{_getAccordionClasses('header',_showBadge,'')}}">
                        <paper-icon-button title="Toggle Badge Properties" icon="{{_getArrowIcon(_showBadge)}}"
                                           on-click="_toggleBadge" data-index$="[[index]]"></paper-icon-button>
                        <div class$="{{_getZoneTitleClasses(_showBadge,'','')}}" data-index$="[[index]]">
                           Badge
                        </div>
                    </div>
                    <div class$="{{_getAccordionClasses('body',_showBadge,'')}}">
                        <div class="row">
                            <div class="buttonCol">
                                <paper-icon-button src="{{getBadgeUrl(_loadedAlert.template.badge)}}"
                                                   class="badgeIcon"
                                                   on-click="chooseAlertBadge"></paper-icon-button>
                            </div>
                        </div>
                    </div>
                </div>
            </template>
            <div class="accordion">
                <template id="zones-repeat" is="dom-repeat" items="[[_loadedAlert.selectedStack.zones]]" as="zone">
                    <div class$="{{_getAccordionClasses('header',zone.active,'')}}">
                        <template is="dom-if" if="[[!zone.renaming]]">
                            <paper-icon-button title="Toggle Zone Properties" icon="{{_getArrowIcon(zone.active)}}"
                                               on-click="_toggleProperties" data-index$="[[index]]"></paper-icon-button>
                            <div class$="{{_getZoneTitleClasses(zone.active,hideZoneNameEditing,'')}}"
                                 data-index$="[[index]]" on-click="_toggleProperties">
                                [[zone.name]]
                            </div>
                            <div class$="{{_getZoneTitleButtonClasses(hideZoneNameEditing)}}" hidden="[[!zone.active]]">
                                <template is="dom-if" if="[[!hideZoneNameEditing]]">
                                    <paper-icon-button icon="create" data-index$="[[index]]" title="Edit Zone Name"
                                                       on-click="_toggleProximityZoneRenaming">
                                    </paper-icon-button>
                                </template>
                                <paper-icon-button title="Remove Zone" icon="delete" on-click="_removeProximityZone"
                                                   data-index$="[[index]]" tabindex="4">
                                </paper-icon-button>
                            </div>
                        </template>
                        <template is="dom-if" if="[[zone.renaming]]">
                            <paper-input id$="zone-[[index]]" tabindex="5"
                                         label="Zone"
                                         class="rename-input"
                                         placeholder="New Value"
                                         on-keydown="_renameProximityZoneViaKeydown"
                                         on-blur="_renameProximityZoneViaBlur"
                                         maxlength="70"
                                         data-index$="[[index]]"
                                         value="{{_zoneNameVal::input}}"
                                         disabled="[[!zone.renaming]]">>
                            </paper-input>
                        </template>
                    </div>
                    <div class$="{{_getAccordionClasses('body',zone.active,'')}}">
                        <div class="table">
                                <div class="row">
                                    <div class="buttonCol">
                                        <template is="dom-if" if="[[_isPointerLocked]]">
                                            <div class="bold">Zone Resizing Enabled</div>
                                            Move the mouse up and down to adjust the size of the zone. Click to exit.
                                        </template>
                                        <template is="dom-if" if="[[!_isPointerLocked]]">
                                            <paper-button data-index$="[[index]]"
                                                          raised title="Adjust Area"
                                                          on-click="_adjustZoneSize">
                                                Adjust Area
                                            </paper-button>
                                        </template>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="propertyCol">
                                        Colour
                                    </div>
                                    <div class="valueCol">
                                        <input id$="jsColor-[[index]]" class="jscolor"
                                               data-jscolor="{onFineChange:'_jsColorFineChange(this)'}"
                                               tabindex="6"
                                               data-property="colour"
                                               data-index$="[[index]]"
                                               on-change="_editProperty"
                                               on-keydown="_editPropertyViaKeydown"
                                               value="{{zone.colour::change}}">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="propertyCol">
                                        Opacity
                                    </div>
                                    <div class="valueCol opacity">
                                        <paper-slider min="0" max="1" step="0.05" pin snaps tabindex="7" data-property="opacity"
                                                      on-change="_editProperty" data-index$="[[index]]" value="{{zone.opacity}}"
                                                      on-immediate-value-change="_immediateValueChange"
                                                      immediate-value="{{_immediateValueOpacity}}">
                                        </paper-slider>
                                    </div>
                                </div>
                        </div>
                    </div>
                </template>
            </div>
            <template is="dom-if" if="[[!_loadedAlert.selectedStack]]">
                <template is="dom-if" if="[[_loadedAlert.template.zoneStacks.length]]">
                    <div class="alert-template-desc no-stack">
                        There is currently no stack loaded. Select a stack from the map to load its data.
                    </div>
                </template>
                <template is="dom-if" if="[[!_loadedAlert.template.zoneStacks.length]]">
                    <div class="alert-template-desc no-stack">
                        There are currently no stacks in this template. Draw a
                        new stack using the shape icons in the top-right corner.
                    </div>
                </template>
            </template>
            <div class="accordion">
                <template is="dom-if" if="[[_fallbackZone.enabled]]">
                    <div class$="{{_getAccordionClasses('header',_fallbackZone.active,'')}}">
                        <template is="dom-if" if="[[!_fallbackZone.renaming]]">
                            <paper-icon-button title="Toggle Zone Properties" icon="{{_getArrowIcon(_fallbackZone.active)}}"
                                               on-click="_toggleFallbackZoneProperties"></paper-icon-button>
                            <div class$="{{_getZoneTitleClasses(_fallbackZone.active,hideZoneNameEditing,'')}}"
                                 on-click="_toggleFallbackZoneProperties">
                                [[_fallbackZone.name]]
                            </div>
                            <div class$="{{_getZoneTitleButtonClasses(hideZoneNameEditing)}}" hidden="[[!_fallbackZone.active]]">
                                <template is="dom-if" if="[[!hideZoneNameEditing]]">
                                    <paper-icon-button icon="create" data-index$="[[index]]"
                                                       on-click="_toggleProximityZoneRenaming">
                                    </paper-icon-button>
                                </template>
                                <paper-icon-button title="Remove Zone" icon="delete"
                                                   on-click="_removeFallbackZone" tabindex="4">
                                </paper-icon-button>
                            </div>
                        </template>
                        <template is="dom-if" if="[[_fallbackZone.renaming]]">
                            <paper-input id="zone-fallback" tabindex="5"
                                         label="Zone"
                                         class="rename-input"
                                         placeholder="New Value"
                                         on-keydown="_renameProximityZoneViaKeydown"
                                         on-blur="_renameProximityZoneViaBlur"
                                         maxlength="70"
                                         value="{{_zoneNameVal::input}}"
                                         disabled="[[!_fallbackZone.renaming]]">>
                            </paper-input>
                        </template>
                    </div>
                    <div class$="{{_getAccordionClasses('body',_fallbackZone.active,'')}}">
                        <div class="table">
                            <div class="row">
                                <div class="propertyCol">
                                    Colour
                                </div>
                                <div class="valueCol">
                                    <input id="jsColor-fallbackZone" class="jscolor"
                                           data-jscolor="{onFineChange:'_jsColorFineChange(this)'}"
                                           tabindex="6"
                                           data-property="colour"
                                           on-change="_editProperty"
                                           on-keydown="_editPropertyViaKeydown"
                                           value="{{_fallbackZone.colour::change}}">
                                </div>
                            </div>
                            <div class="row">
                                <div class="propertyCol">
                                    Opacity
                                </div>
                                <div class="valueCol opacity">
                                    <paper-slider min=0 max=1 step=0.05 pin snaps tabindex="7" data-property="opacity"
                                                  on-change="_editProperty" value="{{_fallbackZone.opacity}}"
                                                  on-immediate-value-change="_immediateValueChange"
                                                  immediate-value="{{_immediateValueOpacity}}">
                                    </paper-slider>
                                </div>
                            </div>
                        </div>
                    </div>
                </template>
            </div>
        </template>
        <paper-dialog id="modalDialog" modal on-keyup="_dialogKeyUp" on-iron-overlay-opened="_fixModalStacking">
            <div>
                <template is="dom-if" if="[[_dialogMessage]]">
                    <p>[[_dialogMessage]]</p>
                </template>
                <template is="dom-if" if="[[_showDialogInput]]">
                    <paper-input autofocus no-label-float on-keyup="_dialogKeyUp" value="{{_dialogInput}}"></paper-input>
                </template>
                <template is="dom-if" if="[[_showDialogToggle]]">
                    <div class="text-center">
                        <div style="width:100%;">[[_dialogToggleLabel]]</div>
                        <paper-toggle-button class="inline" style="width:150px;" checked="{{_dialogToggle}}">
                        </paper-toggle-button>
                    </div>
                </template>
                <template is="dom-if" if="[[_showDialogCategories]]">
                    <div class="category-picker">
                        <template is="dom-if" if="[[!_templateCategories.length]]">
                            <p class="category-message">No template categories defined</p>
                            <paper-button raised title="Add New Category" on-click="_manageCategories">Add New Category</paper-button>
                        </template>
                        <template is="dom-if" if="[[_templateCategories.length]]">
                            <p class="category-message">
                                Select one or more template categories
                            </p>
                            <div class="category-wrapper">
                                <iron-selector id="categorySelector" attr-for-selected="name" multi selected-values="{{_selectedCategories}}">
                                    <template is="dom-repeat" items="[[_templateCategories]]" as="category" sort="_sortCategories">
                                        <div name="[[category]]" class="category-item" title="[[category]]">
                                            [[category]]
                                        </div>
                                    </template>
                                </iron-selector>
                            </div>
                            <paper-button style="font-size:11px;padding:5px;" raised title="Manage Categories" on-click="_manageCategories">Manage Categories</paper-button>
                        </template>
                    </div>
                </template>
                <template is="dom-if" if="[[_showDialogBadge]]">
                    <br/>
                    <voyent-alert-badge-chooser value="{{_dialogBadge}}" badgedir="{{badgedir}}"></voyent-alert-badge-chooser>
                </template>
                
                <div class="dialog-bttns">
                    <br/>
                    <paper-button raised title="Cancel" on-click="closeDialog">Cancel</paper-button>
                    <paper-button raised title="Confirm" on-click="_confirmDialog">Confirm</paper-button>
                </div>
            </div>
        </paper-dialog>
        <paper-dialog id="categoryManager" modal on-iron-overlay-opened="_fixModalStacking">
            <div class="new-category-wrapper">
                <div class="new-category-input-wrapper">
                    <paper-input id="newCategoryInput" class="new-category-input"
                                 label="New Category Name" on-keyup="_newCategoryKeyUp"
                                 validator="newCategoryValidator" value="{{_newTemplateCategory}}"></paper-input>
                </div>
                <div class="new-category-button-wrapper">
                    <paper-button class="new-category-button" raised on-click="_addNewTemplateCategory">Add New Category</paper-button>
                </div>
            </div>
            <template is="dom-if" if="[[_editedTemplateCategories.length]]">
                <div class="table-wrap">
                    <div class="table">
                        <div class="category-col tableHeader">Category</div>
                        <div class="delete-col tableHeader"></div>
                    </div>
                    <div class="table-scroll">
                        <template is="dom-repeat" items="[[_editedTemplateCategories]]" as="category">
                            <div class="table">
                                <div class="category-col no-select">
                                    <paper-input id$="category-[[index]]" label="Category Name" no-label-float value="{{category.name::input}}"
                                                 validator="existingCategoryValidator" on-value-changed="_validateCategoriesOnChange"></paper-input>
                                </div>
                                <div class="delete-col no-select">
                                    <paper-icon-button icon="delete" on-click="_deleteCategory" title="Delete Category"></paper-icon-button>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>
            </template>
            <div class="category-buttons-wrapper text-center">
                <paper-button raised title="Cancel changes" on-click="_cancelCategoryChanges">Cancel</paper-button>
                <paper-button raised title="Confirm changes" on-click="_saveCategoryChanges" disabled="[[_categoryInputInvalid]]">Confirm</paper-button>
            </div>
        </paper-dialog>
    </template>
</dom-module>

<script src="voyent-alert-properties.js"></script>
